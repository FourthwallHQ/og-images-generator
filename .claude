# Notatki dotyczące OG Image Generator - Claude

## Problem z logo w @vercel/og (październik 2024)

### Problem
- Logo nie wyświetlało się w wygenerowanych obrazach z @vercel/og
- W Storybook logo działało poprawnie
- Problem dotyczył tylko nowego komponentu `LogoCenteredComponent`

### Przyczyna
@vercel/og ma ograniczoną kompatybilność z CSS i nie obsługuje wszystkich właściwości flexbox tak samo jak zwykły HTML/CSS.

**Problematyczny kod:**
```tsx
// NIE DZIAŁA w @vercel/og
<div style={{ display: 'flex', alignItems: 'center', width: 720, height: 315 }}>
  <img src={logoUrl} style={{ maxWidth: 720, maxHeight: 315 }} />
</div>
```

**Działający kod (jak w ShopLogo):**
```tsx
// DZIAŁA w @vercel/og
<img
  src={logoUrl}
  style={{
    maxWidth: '60%',
    maxHeight: '50%',
    objectFit: 'contain'
  }}
/>
```

### Rozwiązanie
1. **Uprościć strukturę logo** - usunąć niepotrzebne wrapper div-y wokół `<img>`
2. **Używać prostych stylów** - `maxWidth`, `maxHeight`, `objectFit: 'contain'`
3. **Unikać skomplikowanych flexbox-ów** wokół obrazów
4. **Używać procentów zamiast pikseli** dla obrazów (gdy to możliwe)

### Inne problemy napotkane
- **Przekierowania (302)**: `@vercel/og` nie śledzi przekierowań automatycznie
  - Rozwiązanie: dodano `resolveRedirectedUrl()` funkcję

### Zasady na przyszłość

#### Do robienia:
- ✅ Używaj prostej struktury `<img>` jak w `ShopLogo`
- ✅ Testuj komponenty w rzeczywistym środowisku @vercel/og, nie tylko w Storybook
- ✅ Sprawdzaj istniejące działające komponenty przed tworzeniem nowych
- ✅ Używaj `objectFit: 'contain'` dla obrazów
- ✅ Rozwiązuj przekierowania URL przed przekazaniem do @vercel/og

#### Nie robić:
- ❌ Nie dodawaj niepotrzebnych wrapper div-ów wokół `<img>`
- ❌ Nie używaj skomplikowanych flexbox-ów dla prostych obrazów
- ❌ Nie zakładaj, że CSS działa tak samo w @vercel/og jak w przeglądarce
- ❌ Nie testuj tylko w Storybook - zawsze testuj rzeczywiste generowanie obrazów

#### Debugowanie @vercel/og
1. Porównaj z działającymi komponentami (np. `ShopLogo`)
2. Uprość CSS do minimum
3. Usuń wrapper div-y po kolei
4. Testuj rzeczywiste generowanie, nie tylko Storybook

#### Szablony CSS dla @vercel/og

**Logo/obrazy:**
```tsx
<img
  src={url}
  style={{
    maxWidth: '60%',
    maxHeight: '50%',
    objectFit: 'contain'
  }}
/>
```

**Layout kontenerów:**
```tsx
<div style={{
  display: 'flex',
  flexDirection: 'column',
  height: '100%',
  width: '100%',
  alignItems: 'center',
  justifyContent: 'center'
}}>
```